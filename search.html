<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Latest compiled and minified CSS (Bootstrap 3.3.7) -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- Custom CSS -->
    <style>
        body {
            margin: 0;
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar-inverse {
            background-color: #764BA2;
            border-color: #764BA2;
        }
        .navbar-inverse .navbar-brand {
            color: #fff;
        }
        .navbar-inverse .navbar-brand:hover {
            color: #eaeaea;
        }
        .searchResults__result h4 {
            margin-top: 20px;
            color: #764BA2;
        }
        .searchResults__result .resultDescription {
            margin-top: 10px;
            font-size: 1em;
        }
        /* Pagination Styling */
        .pager {
            text-align: center;
        }
        /* Adjust the container to match your site's width */
        .container-custom {
            max-width: 1200px;
            margin: auto;
        }
        /* Hide the facet panel if not used */
        #facetPanel {
            display: none;
        }
        /* Adjust the search field's width */
        .navbar-form {
            width: 40%; /* Initial width */
            margin: 0 auto;
            margin-top: 7px;
        }
        .azs-search-box {
            width: 100%; /* Full width of navbar-form */
            margin: 0 auto; /* Center the search box */
        }
        .azs-search-box input[type="text"] {
            width: 100% !important; /* Ensure the input fills the input group */
        }

        /* Custom Media Query to Expand Search Bar and Align Button */
        @media (min-width: 768px) {
            .navbar-form {
                width: 60% !important; /* Increase the form's width */
            }
            .azs-search-box .input-group {
                width: 100%; /* Ensure the input group takes full width */
            }
            .azs-search-box .form-control {
                width: 100% !important; /* Let the input take available space */
            }
            /* Remove fixed margin on the button */
            .azs-search-box .input-group-btn:last-child > .btn, 
            .azs-search-box .input-group-btn:last-child > .btn-group {
                z-index: 2;
                margin-left: 0; /* Remove any left margin */
            }
        }
    </style>
    <title>AI Search</title>
</head>
<body>
    <div id="app">
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="container-fluid container-custom">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbarSearch" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div id="navbarSearch" class="collapse navbar-collapse">
                    <form class="navbar-form" role="search">
                        <div id="searchBox" class="azs-search-box"></div>
                    </form>
                </div>
            </div>
        </nav>
        <div class="container-fluid container-custom" style="margin-top: 70px;">
            <div class="row">
                <!-- Main Content Area -->
                <div class="col-xs-12">
                    <div id="results" class="searchResults__result"></div>
                    <div id="pager" class="pager"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Dependencies -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/react/15.5.0/react.min.js"></script>
    <script src="https://cdn.jsdelivr.net/react/15.5.0/react-dom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/redux/3.6.0/redux.min.js"></script>
    <!-- AzSearch.js -->
    <script src="https://cdn.jsdelivr.net/npm/@microsoft/azsearch.js@0.0.21/dist/AzSearch.bundle.js"></script>
    <script>
        // Initialize and connect to your search service
        var automagic = new AzSearch.Automagic({ index: "linn", queryKey: "HQLS1npkisHmVCgcYorPpl0aVhaPFW2shMQNelFEX9AzSeBMDIo9", service: "linnaisearch", dnsSuffix:"search.windows.net" });
        
        const resultTemplate = `
            <div class="col-xs-12">
                <h4>{{title}}</h4>
                <div class="resultDescription">{{{content}}}</div>
            </div>
        `;

        // Add a results view using the template defined above
        automagic.addResults("results", { count: true }, resultTemplate);
        
        // Adds a pager control
        automagic.addPager("pager");
        
        // Adds the search box
        automagic.addSearchBox("searchBox");

        // Wait for the search box to render, then add the Enter key functionality
        automagic.on("renderCompleted", function () {
            var searchInput = document.querySelector('#searchBox input[type="text"]');
            var searchButton = document.querySelector('#searchBox button[type="submit"]');

            if (searchInput && searchButton) {
                // Attach the "keydown" event to the search input
                searchInput.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();  // Prevent form default submission
                        searchButton.click();  // Simulate click on search button
                    }
                });
            }
        });
    </script>
</body>
</html>
